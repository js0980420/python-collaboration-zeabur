# ğŸš€ Pythonå”ä½œæ•™å­¸å¹³å° - WebSocketå³æ™‚ç‰ˆéƒ¨ç½²èªªæ˜

## ğŸ“‹ ç‰ˆæœ¬å°æ¯”

### HTTPè¼ªè©¢ç‰ˆ vs WebSocketç‰ˆ

| ç‰¹æ€§ | HTTPè¼ªè©¢ç‰ˆ | WebSocketç‰ˆ |
|------|------------|-------------|
| **åŒæ­¥å»¶é²** | 2ç§’é–“éš”è¼ªè©¢ | <0.5ç§’å³æ™‚åŒæ­¥ |
| **æŠ€è¡“æ¶æ§‹** | PHP + MySQL + HTTP | PHP + Ratchet + WebSocket |
| **é€£æ¥æ–¹å¼** | å®¢æˆ¶ç«¯ä¸»å‹•è¼ªè©¢ | é›™å‘å³æ™‚é€šä¿¡ |
| **è³‡æºæ¶ˆè€—** | è¼ƒé«˜ï¼ˆé »ç¹HTTPè«‹æ±‚ï¼‰ | è¼ƒä½ï¼ˆæŒä¹…é€£æ¥ï¼‰ |
| **ä¸¦ç™¼æ”¯æ´** | è¼ƒå°‘ï¼ˆå—HTTPé™åˆ¶ï¼‰ | æ›´å¤šï¼ˆäº‹ä»¶é©…å‹•ï¼‰ |
| **æ–·ç·šè™•ç†** | è‡ªå‹•é‡é€£ | è‡ªå‹•é‡é€£ + å¿ƒè·³æª¢æ¸¬ |
| **éƒ¨ç½²è¤‡é›œåº¦** | ç°¡å–®ï¼ˆåƒ…éœ€XAMPPï¼‰ | ä¸­ç­‰ï¼ˆéœ€è¦é¡å¤–Node.jsåº«ï¼‰ |

## ğŸ¯ WebSocketç‰ˆæœ¬å„ªå‹¢

### 1. çœŸæ­£çš„å¯¦æ™‚å”ä½œ
- **ç›®æ¨™å»¶é²**: <0.5ç§’
- **å³æ™‚åŒæ­¥**: ä»£ç¢¼ä¿®æ”¹ç«‹å³å»£æ’­
- **é›™å‘é€šä¿¡**: æœå‹™å™¨å¯ä¸»å‹•æ¨é€æ›´æ–°
- **äº‹ä»¶é©…å‹•**: é«˜æ•ˆçš„æ¶ˆæ¯è™•ç†æ©Ÿåˆ¶

### 2. æ›´å¥½çš„ç”¨æˆ¶é«”é©—
- **å¯¦æ™‚æ¸¸æ¨™**: çœ‹åˆ°å…¶ä»–ç”¨æˆ¶çš„ç·¨è¼¯ä½ç½®
- **å³æ™‚èŠå¤©**: ç„¡å»¶é²çš„èŠå¤©åŠŸèƒ½
- **ç”¨æˆ¶ç‹€æ…‹**: å¯¦æ™‚çš„åœ¨ç·šç”¨æˆ¶åˆ—è¡¨
- **é€£æ¥ç‹€æ…‹**: æ˜ç¢ºçš„é€£æ¥ç‹€æ…‹æŒ‡ç¤º

### 3. å„ªåŒ–çš„æ€§èƒ½
- **æ¸›å°‘æœå‹™å™¨è² è¼‰**: ç„¡éœ€é »ç¹è¼ªè©¢
- **é™ä½ç¶²è·¯é–‹éŠ·**: æŒä¹…é€£æ¥å¾©ç”¨
- **æ›´å¥½çš„æ“´å±•æ€§**: æ”¯æ´æ›´å¤šä¸¦ç™¼ç”¨æˆ¶

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒçµ„ä»¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    WebSocket     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯å®¢æˆ¶ç«¯     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Ratchetæœå‹™å™¨    â”‚
â”‚ (JavaScript)    â”‚      ws://       â”‚  (PHP + ReactPHP) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚   MySQLæ•¸æ“šåº«     â”‚
                                     â”‚  (ä»£ç¢¼å¿«ç…§å­˜å„²)   â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾è³´åº«
- **Ratchet/Ratchet**: WebSocketæœå‹™å™¨æ¡†æ¶
- **ReactPHP**: ç•°æ­¥äº‹ä»¶é©…å‹•æ¡†æ¶
- **CodeMirror**: å‰ç«¯ä»£ç¢¼ç·¨è¼¯å™¨
- **Bootstrap**: UIæ¡†æ¶

## ğŸ“¦ éƒ¨ç½²æ­¥é©Ÿ

### 1. ç’°å¢ƒæº–å‚™
```bash
# ç¢ºä¿å·²å®‰è£XAMPP
# ç¢ºä¿PHPç‰ˆæœ¬ >= 7.4
# ç¢ºä¿MySQLæœå‹™æ­£åœ¨é‹è¡Œ
```

### 2. å®‰è£ä¾è³´
```bash
# é€²å…¥websocket_versionç›®éŒ„
cd websocket_version

# é‹è¡Œè‡ªå‹•åŒ–å®‰è£è…³æœ¬
å•Ÿå‹•WebSocketæœå‹™å™¨.bat
```

### 3. æ‰‹å‹•å®‰è£ï¼ˆå¦‚æœè‡ªå‹•åŒ–å¤±æ•—ï¼‰
```bash
# å®‰è£Composerï¼ˆå¦‚æœæœªå®‰è£ï¼‰
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
php composer-setup.php
php -r "unlink('composer-setup.php');"

# å®‰è£ä¾è³´
php composer.phar install --no-dev --optimize-autoloader
```

### 4. å•Ÿå‹•æœå‹™
```bash
# å•Ÿå‹•WebSocketæœå‹™å™¨ï¼ˆç«¯å£8080ï¼‰
php websocket_server.php

# åœ¨ç€è¦½å™¨è¨ªå•
http://localhost/collaboration/websocket_collaboration_platform.html
```

## ğŸ”§ é…ç½®èªªæ˜

### WebSocketæœå‹™å™¨é…ç½®
```php
// websocket_server.php
$port = 8080;                    // WebSocketç«¯å£
$host = '0.0.0.0';              // ç›£è½åœ°å€
$maxReconnectAttempts = 5;       // æœ€å¤§é‡é€£æ¬¡æ•¸
$pingInterval = 5000;            // å¿ƒè·³é–“éš”(ms)
```

### æ•¸æ“šåº«é…ç½®
```php
// MySQLé€£æ¥é…ç½®
$dsn = "mysql:host=localhost;port=3306;dbname=python_collaboration;charset=utf8mb4";
$username = 'root';
$password = '';  // XAMPPé è¨­ç„¡å¯†ç¢¼
```

### å‰ç«¯é…ç½®
```javascript
// WebSocketé€£æ¥åœ°å€
const wsUrl = 'ws://localhost:8080';

// é‡é€£è¨­ç½®
this.maxReconnectAttempts = 5;
this.pingInterval = 5000;  // 5ç§’å¿ƒè·³
```

## ğŸ§ª æ¸¬è©¦é©—è­‰

### 1. è‡ªå‹•åŒ–å»¶é²æ¸¬è©¦
```bash
# é‹è¡Œå»¶é²æ¸¬è©¦è…³æœ¬
æ¸¬è©¦WebSocketå»¶é².bat
```

### 2. æ‰‹å‹•åŠŸèƒ½æ¸¬è©¦
1. **å¤šç”¨æˆ¶å”ä½œæ¸¬è©¦**
   - æ‰“é–‹å…©å€‹ç€è¦½å™¨æ¨™ç±¤é 
   - ä½¿ç”¨ç›¸åŒæˆ¿é–“ä»£ç¢¼ï¼Œä¸åŒç”¨æˆ¶å
   - åœ¨ä¸€å€‹æ¨™ç±¤é ç·¨è¼¯ä»£ç¢¼
   - è§€å¯Ÿå¦ä¸€å€‹æ¨™ç±¤é çš„å³æ™‚æ›´æ–°

2. **é€£æ¥ç©©å®šæ€§æ¸¬è©¦**
   - æª¢æŸ¥é€£æ¥ç‹€æ…‹æŒ‡ç¤ºå™¨
   - æ¸¬è©¦ç¶²è·¯ä¸­æ–·å¾Œçš„è‡ªå‹•é‡é€£
   - è§€å¯Ÿå»¶é²é¡¯ç¤ºæ˜¯å¦æ­£å¸¸

3. **åŠŸèƒ½å®Œæ•´æ€§æ¸¬è©¦**
   - å³æ™‚èŠå¤©åŠŸèƒ½
   - AIåŠ©æ•™åŠŸèƒ½
   - ç”¨æˆ¶åˆ—è¡¨æ›´æ–°
   - ä»£ç¢¼ç‰ˆæœ¬ç®¡ç†

## ğŸ“Š æ€§èƒ½æŒ‡æ¨™

### ç›®æ¨™æ€§èƒ½
- **åŒæ­¥å»¶é²**: <500ms
- **é€£æ¥å»ºç«‹**: <200ms
- **ä¸¦ç™¼ç”¨æˆ¶**: 50+
- **æ¶ˆæ¯è™•ç†**: <100ms

### ç›£æ§æ–¹æ³•
- å·¥å…·æ¬„å¯¦æ™‚å»¶é²é¡¯ç¤º
- ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·WebSocketé¢æ¿
- æœå‹™å™¨æ—¥èªŒæ–‡ä»¶(`websocket_debug.log`)

## ğŸ”€ ç‰ˆæœ¬åˆ‡æ›æŒ‡å—

### å¾HTTPè¼ªè©¢ç‰ˆåˆ‡æ›åˆ°WebSocketç‰ˆ
1. **ä¿æŒHTTPç‰ˆæœ¬é‹è¡Œ**ï¼ˆç”¨æ–¼å°æ¯”ï¼‰
2. **å•Ÿå‹•WebSocketæœå‹™å™¨**
3. **è¨ªå•WebSocketå‰ç«¯é é¢**
4. **å°æ¯”å…©å€‹ç‰ˆæœ¬çš„ä½¿ç”¨é«”é©—**

### è¨ªå•åœ°å€
- **HTTPè¼ªè©¢ç‰ˆ**: `http://localhost/collaboration/dual_collaboration_platform.html`
- **WebSocketç‰ˆ**: `http://localhost/collaboration/websocket_collaboration_platform.html`

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. WebSocketé€£æ¥å¤±æ•—
**ç—‡ç‹€**: é¡¯ç¤º"ğŸ”´ æœªé€£æ¥"
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æª¢æŸ¥WebSocketæœå‹™å™¨æ˜¯å¦é‹è¡Œ
netstat -an | findstr :8080

# æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
# Windowsé˜²ç«ç‰†å¯èƒ½é˜»æ­¢8080ç«¯å£

# é‡æ–°å•Ÿå‹•WebSocketæœå‹™å™¨
php websocket_server.php
```

#### 2. ä¾è³´å®‰è£å¤±æ•—
**ç—‡ç‹€**: Composerå®‰è£éŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æ¸…ç†ä¸¦é‡æ–°å®‰è£
rm -rf vendor composer.lock
composer install

# æˆ–ä½¿ç”¨æœ¬åœ°composer.phar
php composer.phar install --no-dev
```

#### 3. é«˜å»¶é²å•é¡Œ
**ç—‡ç‹€**: å»¶é²>500ms
**æ’æŸ¥æ­¥é©Ÿ**:
1. æª¢æŸ¥æœ¬æ©Ÿæ€§èƒ½ï¼ˆCPU/è¨˜æ†¶é«”ï¼‰
2. æª¢æŸ¥MySQLæ•¸æ“šåº«æ€§èƒ½
3. æª¢æŸ¥ç¶²è·¯é€£æ¥ç‹€æ³
4. æŸ¥çœ‹æœå‹™å™¨æ—¥èªŒéŒ¯èª¤

#### 4. ç€è¦½å™¨å…¼å®¹æ€§
**æ”¯æ´çš„ç€è¦½å™¨**:
- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

## ğŸ“ æ–‡ä»¶çµæ§‹

```
websocket_version/
â”œâ”€â”€ composer.json                           # ä¾è³´é…ç½®
â”œâ”€â”€ websocket_server.php                    # WebSocketæœå‹™å™¨
â”œâ”€â”€ websocket_collaboration_platform.html   # å‰ç«¯é é¢
â”œâ”€â”€ å•Ÿå‹•WebSocketæœå‹™å™¨.bat                  # è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬
â”œâ”€â”€ æ¸¬è©¦WebSocketå»¶é².bat                   # å»¶é²æ¸¬è©¦å·¥å…·
â”œâ”€â”€ WebSocketç‰ˆæœ¬éƒ¨ç½²èªªæ˜.md                # æœ¬æ–‡æª”
â”œâ”€â”€ vendor/                                 # Composerä¾è³´ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â””â”€â”€ websocket_debug.log                     # æœå‹™å™¨æ—¥èªŒï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
```

## ğŸš€ éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ

### 1. Zeaburé›²ç«¯éƒ¨ç½²
```json
// zeabur.json
{
  "build": {
    "commands": [
      "composer install --no-dev --optimize-autoloader"
    ]
  },
  "start": "php websocket_server.php",
  "env": {
    "PORT": "8080",
    "DB_HOST": "${MYSQL_HOST}",
    "DB_NAME": "${MYSQL_DATABASE}"
  }
}
```

### 2. æœ¬åœ°ç”Ÿç”¢ç’°å¢ƒ
```bash
# ä½¿ç”¨é€²ç¨‹ç®¡ç†å™¨ï¼ˆå¦‚PM2ï¼‰
npm install -g pm2
pm2 start websocket_server.php --name python-collab-ws

# è¨­ç½®é–‹æ©Ÿè‡ªå•Ÿ
pm2 startup
pm2 save
```

## ğŸ“ˆ å¾ŒçºŒå„ªåŒ–æ–¹å‘

### çŸ­æœŸæ”¹é€²
- åŠ å…¥ä»£ç¢¼è¡çªè§£æ±ºç®—æ³•ï¼ˆOperational Transformationï¼‰
- å¯¦ç¾å¤šç”¨æˆ¶æ¸¸æ¨™é¡¯ç¤º
- å„ªåŒ–å¤§æ–‡ä»¶åŒæ­¥æ€§èƒ½

### é•·æœŸè¦åŠƒ
- æ”¯æ´è¦–é »é€šè©±å”ä½œ
- åŠ å…¥ä»£ç¢¼æ­·å²å›æ”¾åŠŸèƒ½
- å¯¦ç¾å”ä½œå­¸ç¿’åˆ†æé¢æ¿

---

## ğŸ‰ é–‹å§‹ä½¿ç”¨

æº–å‚™å¥½é«”é©—çœŸæ­£çš„å¯¦æ™‚å”ä½œç·¨ç¨‹äº†å—ï¼Ÿ

1. **å•Ÿå‹•æœå‹™å™¨**: é‹è¡Œ `å•Ÿå‹•WebSocketæœå‹™å™¨.bat`
2. **æ¸¬è©¦å»¶é²**: é‹è¡Œ `æ¸¬è©¦WebSocketå»¶é².bat`
3. **é–‹å§‹å”ä½œ**: è¨ªå• WebSocketç‰ˆæœ¬é é¢
4. **äº«å—<0.5ç§’çš„å³æ™‚åŒæ­¥é«”é©—**ï¼

**ğŸ”— å¿«é€Ÿè¨ªå•**: `http://localhost/collaboration/websocket_collaboration_platform.html` 