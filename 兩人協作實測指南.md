# 🧪 兩人協作實測指南 - XAMPP 環境

## 📋 測試環境設置

### 🖥️ 桌電端（主機）- 光纖網路
- **角色**: 協作主機 + 用戶A
- **網路**: 光纖寬頻（穩定、低延遲）
- **瀏覽器**: Chrome/Edge（建議）
- **顏色標識**: 🔴 紅色游標

### 💻 筆電端（客戶端）- 手機網路
- **角色**: 協作客戶端 + 用戶B  
- **網路**: 手機熱點分享（可能不穩定、高延遲）
- **瀏覽器**: Chrome/Edge（建議）
- **顏色標識**: 🔵 藍色游標

## 🚀 快速部署步驟

### 步驟 1: 桌電端設置（主機）

1. **啟動 XAMPP 服務**
```bash
# 執行快速測試腳本
./快速測試腳本.bat
```

2. **確認服務運行**
- Apache: ✅ 運行在 http://localhost
- MySQL: ✅ 數據庫服務正常

3. **獲取本機 IP 地址**
```cmd
ipconfig | findstr "IPv4"
```
記錄顯示的 IP 地址（例如：192.168.1.100）

### 步驟 2: 部署協作文件

1. **複製測試文件到 XAMPP**
```cmd
copy "雙人協作測試_修復版.html" "C:\xampp\htdocs\collaboration.html"
copy "code_sync_handler.php" "C:\xampp\htdocs\"
copy "chat_api_handler.php" "C:\xampp\htdocs\"
copy "init_xampp_database.php" "C:\xampp\htdocs\"
```

2. **初始化數據庫**
- 訪問: http://localhost/init_xampp_database.php
- 確認數據庫創建成功

### 步驟 3: 筆電端連接

1. **連接到桌電主機**
- 訪問: http://[桌電IP]/collaboration.html
- 例如: http://192.168.1.100/collaboration.html

2. **確認網路連通性**
```cmd
ping [桌電IP]
```

## 🧪 協作測試項目

### 基礎連接測試

#### 測試 1: 頁面載入速度
- **桌電（光纖）**: 預期 < 2 秒
- **筆電（手機網路）**: 預期 < 5 秒
- **記錄**: 實際載入時間

#### 測試 2: 即時同步延遲
1. 桌電輸入文字
2. 筆電觀察同步時間
3. **目標延遲**: < 500ms
4. **記錄**: 實際延遲時間

### 協作功能測試

#### 測試 3: 雙向編輯同步
```python
# 桌電端輸入
print("桌電用戶A輸入")

# 筆電端輸入  
print("筆電用戶B輸入")

# 觀察同步效果
```

#### 測試 4: 游標位置同步
- 桌電移動游標到不同位置
- 筆電觀察紅色游標是否正確顯示
- 反向測試藍色游標

#### 測試 5: 衝突解決測試
1. 兩端同時編輯同一行
2. 觀察衝突解決機制
3. 確認最終代碼一致性

### 網路穩定性測試

#### 測試 6: 網路中斷恢復
1. 筆電暫時斷開手機網路
2. 重新連接後觀察同步恢復
3. 檢查數據完整性

#### 測試 7: 高延遲環境測試
- 模擬網路延遲（手機網路切換到較差信號區域）
- 測試協作功能是否仍然可用

## 📊 測試記錄表格

### 性能測試記錄

| 測試項目 | 桌電（光纖） | 筆電（手機網路） | 差異 | 狀態 |
|---------|-------------|----------------|------|------|
| 頁面載入 | ___秒 | ___秒 | ___秒 | ✅/❌ |
| 同步延遲 | ___ms | ___ms | ___ms | ✅/❌ |
| 游標同步 | ___ms | ___ms | ___ms | ✅/❌ |
| 衝突解決 | ___秒 | ___秒 | ___秒 | ✅/❌ |

### 功能測試記錄

| 功能 | 測試結果 | 問題描述 | 解決方案 |
|------|---------|---------|---------|
| 雙向編輯 | ✅/❌ | | |
| 游標顯示 | ✅/❌ | | |
| 聊天功能 | ✅/❌ | | |
| 斷線重連 | ✅/❌ | | |

## 🔧 故障排除

### 常見問題

#### 問題 1: 筆電無法連接桌電
**可能原因**:
- 防火牆阻擋
- IP 地址錯誤
- Apache 未啟動

**解決方案**:
```cmd
# 檢查防火牆
netsh advfirewall firewall add rule name="Apache" dir=in action=allow protocol=TCP localport=80

# 確認 Apache 狀態
netstat -an | findstr :80
```

#### 問題 2: 同步延遲過高
**可能原因**:
- 手機網路信號差
- 服務器負載高
- BroadcastChannel API 問題

**解決方案**:
- 移動到信號較好的位置
- 重啟瀏覽器
- 檢查瀏覽器控制台錯誤

#### 問題 3: 游標不同步
**檢查項目**:
- 瀏覽器兼容性
- JavaScript 錯誤
- 網路連接穩定性

## 📈 性能優化建議

### 針對手機網路優化

1. **減少數據傳輸**
```javascript
// 增加防抖時間
const DEBOUNCE_DELAY = 200; // 手機網路建議 200ms

// 壓縮同步數據
function compressData(data) {
    // 只傳輸變更部分
    return {
        type: 'delta',
        changes: data.changes
    };
}
```

2. **增強錯誤處理**
```javascript
// 網路重試機制
function syncWithRetry(data, maxRetries = 3) {
    // 實現重試邏輯
}
```

## 🎯 測試目標與期望

### 最低可接受標準
- **連接成功率**: > 95%
- **同步延遲**: < 1 秒
- **功能完整性**: 100%

### 理想性能目標
- **連接成功率**: 100%
- **同步延遲**: < 300ms
- **斷線重連**: < 5 秒

## 📝 測試報告模板

### 測試環境
- **測試日期**: ___________
- **桌電網路**: 光纖 ___Mbps
- **手機網路**: 4G/5G ___Mbps
- **測試時長**: ___小時

### 測試結果
- **整體評分**: ___/10
- **主要問題**: ___________
- **改進建議**: ___________

### 用戶體驗評價
- **桌電端體驗**: ⭐⭐⭐⭐⭐
- **筆電端體驗**: ⭐⭐⭐⭐⭐
- **協作流暢度**: ⭐⭐⭐⭐⭐

---

## 🚀 開始測試

準備好後，執行以下命令開始測試：

```bash
# 1. 啟動 XAMPP 環境
./快速測試腳本.bat

# 2. 部署協作文件
./啟動修復版協作.bat

# 3. 開始雙人協作測試
# 桌電: http://localhost/collaboration.html
# 筆電: http://[桌電IP]/collaboration.html
```

**祝測試順利！** 🎉 